(function(e){function t(t){for(var r,i,l=t[0],u=t[1],a=t[2],f=0,d=[];f<l.length;f++)i=l[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(d.length)d.shift()();return s.push.apply(s,a||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,l=1;l<n.length;l++){var u=n[l];0!==o[u]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("8bbf"),o=n.n(r),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"column-flex gap align-start"},[n("div",{staticClass:"row-flex header"},[e._m(0),n("div",{staticClass:"row-flex"},[n("LoadFile"),n("button",{on:{click:e.last_sentence}},[e._v("上一句")]),n("button",{on:{click:e.next_sentence}},[e._v("下一句")])],1)]),n("div",{staticClass:"sentence row-flex justify-start"},e._l(e.words,(function(t,r){return n("div",{key:r,staticClass:"word fs-medium",style:{color:e.colors[t.deep]}},[e._v(" "+e._s(t.word)+" ")])})),0),e._l(e.levels,(function(t,r){return n("div",{key:r,staticClass:"row-flex gap"},[n("div",{staticClass:"num"},[e._v(e._s(r))]),n("div",{staticClass:"column-flex align-start"},e._l(t,(function(t,r){return n("div",{key:r,staticClass:"row-flex align-start fs-medium gap"},[n("div",[e._v("-")]),n("div",[e._v(e._s(t))])])})),0)])})),n("textarea",{staticClass:"fs-medium",on:{change:e.set_sentence}})],2)])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row-flex"},[r("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),r("p",[e._v("句子染色")])])}],l=n("bee2"),u=n("d4ec"),a=(n("d3b7"),n("159b"),n("ac1f"),n("5319"),n("5b81"),n("841c"),n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:e.import_json}},[e._v("导入JSON")]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",id:"json-file",value:"file"}})])}),c=[],f={name:"LoadFile",mounted:function(){var e=document.getElementById("json-file");e.onchange=this.upload_json},methods:{import_json:function(){var e=document.getElementById("json-file");e.click()},upload_json:function(e){var t=this,n=e.target.files[0],r=new FileReader;r.readAsText(n),r.onload=function(e){console.log(e.target.result);var n=JSON.parse(e.target.result);n.length>0&&(t.bus.app.sentences=n,t.bus.app.num=0,t.bus.app.word_tree.load(n[0]))}}}},d=f,h=(n("ed0c"),n("2877")),p=Object(h["a"])(d,a,c,!1,null,"74b5de92",null),v=p.exports,m={name:"App",components:{LoadFile:v},created:function(){this.bus.app=this},data:function(){return{colors:["black","blue","green","red","orange","violet"],word_tree:new g,sentences:[],num:0}},computed:{words:function(){return this.word_tree.output()},levels:function(){return this.word_tree.get_every_level()}},methods:{set_sentence:function(e){this.word_tree.load(e.target.value)},last_sentence:function(){this.sentences.length>0&&(this.num=Math.max(0,this.num-1),this.word_tree.load(this.sentences[this.num]))},next_sentence:function(){this.sentences.length>0&&(this.num=Math.min(this.sentences.length-1,this.num+1),this.word_tree.load(this.sentences[this.num]))}}},b=Object(l["a"])((function e(t,n,r,o){Object(u["a"])(this,e),this.num=t,this.deep=o,this.type=n,this.word="",this.children=[],this.father=r,this.emphasis=!1})),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(u["a"])(this,e),this.root=t}return Object(l["a"])(e,[{key:"get_sentence",value:function(){var e="";return null!=this.root&&this.bfs((function(t){0==t.type&&"["!=t.word&&"]"!=t.word&&(e+=t.word+" ")})),e}},{key:"get_every_level",value:function(){if(null==this.root)return[];for(var t=[],n=[],r=this.root,o=0;o<100;o++){var s=[];if(console.log(r),r.children.forEach((function(t){1==t.type&&(n.push(t),s.push(new e(t).get_sentence()))})),console.log(n),!(n.length>0))break;s.length>0&&(console.log(s),t.push(s)),r=n.shift()}return t}},{key:"load",value:function(e){e="{".concat(e,"}"),e=e.replaceAll("[","[{").replaceAll("]","}]"),console.log(e);var t=this.divide(e);console.log(t),this.check(t)&&(this.root=this.build(t))}},{key:"check",value:function(e){var t=0;return e.forEach((function(e){"{"==e?t+=1:"}"==e&&(t-=1)})),0==t}},{key:"divide",value:function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e[r];o.search(/\w/)<0&&(n<r&&t.push(e.slice(n,r))," "!=o&&t.push(o),n=r+1)}return t}},{key:"build",value:function(e){var t=0,n=null,r=null,o=-1;return e.forEach((function(e){"{"==e?(o+=1,r=new b(t,1,n,o),null!=n&&n.children.push(r),t+=1,n=r):"}"==e?(null!=n.father&&(n=n.father),o-=1):(r=new b(t,0,n,o),r.word=e,n.children.push(r),t+=1)})),n}},{key:"bfs",value:function(e){var t=this.root;if(null!=t){var n=t;if(!e(n)){var r=[],o=0,s=!0;while(s)if(o<t.children.length)if(n=t.children[o],1==n.type){if(e(n))return;t=n,r.push(o+1),o=0}else{if(e(n))return;o+=1}else{if(t=t.father,null==t)break;o=r.pop()}}}}},{key:"output",value:function(){var e=[];return this.bfs((function(t){0==t.type&&e.push({num:t.num,word:t.word,deep:t.deep,emphasis:t.emphasis})})),e}}]),e}(),_=m,w=(n("034f"),Object(h["a"])(_,s,i,!1,null,null,null)),y=w.exports;o.a.prototype.bus={},o.a.config.productionTip=!1,new o.a({render:function(e){return e(y)}}).$mount("#app")},"85ec":function(e,t,n){},"8bbf":function(e,t){e.exports=Vue},"96d3":function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},ed0c:function(e,t,n){"use strict";n("96d3")}});